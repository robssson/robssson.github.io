<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Wysokie ZakoÅ„czenia</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        table { border-collapse: collapse; margin: 0 auto; width: 80%; }
        th, td { border: 1px solid #333; padding: 10px; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>ðŸŽ¯ ZESTAWIENIE WYSOKICH ZAKOÅƒCZEÅƒ ðŸŽ¯</h1>
    <table id="results-table">
        <thead>
            <tr>
                <th>Zawodnik</th>
                <th>Liczba wysokich zakoÅ„czeÅ„</th>
                <th>WartoÅ›ci zakoÅ„czeÅ„ (â‰¥100)</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                const playerFinishes = {};

                data.forEach(match => {
                    const highFinishes = match.high_finishes || {};
                    for (const [player, finishes] of Object.entries(highFinishes)) {
                        if (finishes && finishes.length > 0) {
                            if (!playerFinishes[player]) playerFinishes[player] = [];
                            playerFinishes[player] = playerFinishes[player].concat(finishes);
                        }
                    }
                });

                const sortedPlayers = Object.entries(playerFinishes)
                    .sort((a, b) => b[1].length - a[1].length || a[0].localeCompare(b[0]));

                const tbody = document.querySelector('#results-table tbody');
                sortedPlayers.forEach(([player, finishes]) => {
                    const row = document.createElement('tr');
                    finishes.sort((a,b) => a-b);
                    row.innerHTML = `
                        <td>${player}</td>
                        <td>${finishes.length}</td>
                        <td>${finishes.join(', ')}</td>
                    `;
                    tbody.appendChild(row);
                });
            })
            .catch(err => console.error('BÅ‚Ä…d wczytywania danych:', err));
    </script>
</body>
</html>
